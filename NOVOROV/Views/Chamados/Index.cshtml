@model IEnumerable<NOVOROV.Models.Chamado>

@{
    ViewData["Title"] = "Index";

    <head>
        <link rel="stylesheet" href="~/css/jquery.datatables.min.css" />
        <link rel="stylesheet" href="~/css/Filter.css" />
    </head>

    <style>
        /*table.dataTable.no-footer {
                                                        border: 1px solid #dee2e6 !important;
                                                    }*/

        .styled-table tbody {
            //background-color: var(--primary);
        }

        .my-trs tr {
            cursor: pointer;
            transition: all 0.15s;
        }

            .my-trs tr td {
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .my-trs tr:hover {
                color: var(--primary);
                transform: translateX(13px);
            }
    </style>
}

<h3>Lista de Chamados</h3>

<div>
    <button onclick="location.href='@Url.Action("Index", "Home")'" class="bttn-stretch bttn-md bttn-primary">
        <i class="fas fa-long-arrow-alt-left"></i>
        Voltar
    </button>
</div>

<div class="panel panel-primary filterable">

<div class="w-100 d-flex align-items-center justify-content-between mt-2 mb-4">
    <h3 class="panel-title">
        <button class="bttn bttn-pill bttn-sm bttn-primary btn-filter">
            <i class="fas fa-filter"></i>
            Ativar Filtro
        </button>
    </h3>
</div>
<hr />

<div class="mt-4 mb-3 d-flex justify-content-between">
    <button onclick="location.href='@Url.Action("Create", "Chamados")'" class="bttn-stretch bttn-md bttn-primary">
        Criar novo chamados
        <i class="fa fa-globe d-inline"></i>
    </button>
</div>


    <table id="tableChamados" class="table styled-table" style="font-size: small;">
        <thead class="styled-table-thead">
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Id)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Solicitante.NomeUsuario)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.loja)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.ResponsavelTrativa)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.DataAbertura)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.DataEncerramento)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.StatusChamado)
                </th>
            </tr>
        </thead>
        <thead>
            <tr class="filters">
                <th>
                    <input type="text" class="form-control" disabled />
                </th>
                <th>
                    <input type="text" class="form-control"  disabled />
                </th>
                <th>
                    <input type="text" class="form-control"  disabled />
                </th>
                <th>
                    <input type="text" class="form-control"  disabled />
                </th>
                <th>
                    <input type="text" class="form-control" disabled />
                </th>
                <th>
                    <input type="text" class="form-control" disabled />
                </th>
                <th>
                    <input type="text" class="form-control" disabled />
                </th>
            </tr>
        </thead>
        <tbody class="my-trs">
            @foreach (var item in Model)
            {
                <tr onclick="location.href='@(Url.Action("Edit", "Chamados", new { id = item.Id }))'">
                    <td>
                        @Html.DisplayFor(modelItem => item.Id)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Solicitante.NomeUsuario)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.loja)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.ResponsavelTrativa)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.DataAbertura)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.DataEncerramento)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.StatusChamado.NomeStatusChamado)
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

@section Scripts{
    <script src="~/js/jquery.datatables.min.js"></script>
    <script src="~/js/Filter.js"></script>

    <script type="text/javascript">
        const dataTableOptions = {
            language: {
                "sEmptyTable": "Não foi encontrado nenhum registo",
                "sLoadingRecords": "A carregar...",
                "sProcessing": "A processar...",
                "sLengthMenu": "Mostrar _MENU_ registos",
                "sZeroRecords": "Não foram encontrados resultados",
                "sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registos",
                "sInfoEmpty": "Mostrando de 0 até 0 de 0 registos",
                "sInfoFiltered": "(filtrado de _MAX_ registos no total)",
                "sInfoPostFix": "",
                "sSearch": "Procurar:",
                "sUrl": "",
                "oPaginate": {
                    "sFirst": "Primeiro",
                    "sPrevious": "Anterior",
                    "sNext": "Seguinte",
                    "sLast": "Último"
                }
            },
            paging: true,
            ordering: true,
        };

        $(document).ready(function () {
            $('#tableChamados').DataTable(dataTableOptions);
        });
    </script>
}

